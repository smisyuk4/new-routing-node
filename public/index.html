<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/main.css" />
    <meta
      name="description"
      content="АРІ для навчання спеціалістів з ручного тестування, розробки сайтів та мобільних додатків. Також може бути цікаво для дизайнерів."
    />
    <title>Posts</title>
  </head>
  <body>
    <header class="header">
  <div class="container">
    <nav>
      <ul class="menu">
        <li>
          <a class="menu__link" href="/api-v1">Інформація</a>
        </li>
        <li>
          <a class="menu__link" href="#docs">Документація</a>
        </li>
        <li>
          <a class="menu__link" href="#contacts">Хто з нами?</a>
        </li>
        <li>
          <a class="menu__link" href="#projects">Проекти</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

    <main>
      <section class="section">
  <div class="container">
    <h2 class="section__title">Інформація про ресурс</h2>

    <h3 class="section__subtitle">
      Перед вами тренувальний проект для безробітних людей, які хочуть здобути
      практичні навички.
    </h3>

    <p class="info__text description">
      Тут написано структуру, яку можна подати як стрічку з публікацій і їх
      перемішувати з книгами. Під публікаціями можна залишати коментарі. Книги
      мають вартість і кількість тому можуть продаватись. Заплановано три ролі
      користувачів: покупець - може робити публікації і коментарі; автор - може
      робити речі як покупець, але і публікувати книги на продаж; адмін - має
      трішки більше доступу до інформації. Також у користувача може бути
      застосована підписка на ресурс, тут же відмічається статус оплати.
    </p>

    <h4 class="info__list__title">
      Не написано, але могли би бути у реальному проекті:
    </h4>
    <ul class="info__list">
      <li>
        <p class="info__text">
          Зворотній звʼязок з адміністором (підключення email)
        </p>
      </li>

      <li>
        <p class="info__text">Платіжний сервіс</p>
      </li>

      <li>
        <p class="info__text">
          Розділ даних і маршрути по оплатам за книги і підписки
        </p>
      </li>

      <li>
        <p class="info__text">
          Кабінет автора з його власною статистикою про продажі книг
        </p>
      </li>

      <li>
        <p class="info__text">Модерація контенту зі сторони адміна</p>
      </li>

      <li>
        <p class="info__text">Резервне копіювання бази і файлів</p>
      </li>
    </ul>

    <h4 class="info__list__title">Кому це може бути цікаво?</h4>
    <ul class="info__list">
      <li>
        <p class="info__text">дизайнерам</p>
      </li>

      <li>
        <p class="info__text">тестувальникам</p>
      </li>

      <li>
        <p class="info__text">фронтенд розробникам</p>
      </li>

      <li>
        <p class="info__text">мобільним розробникам</p>
      </li>

      <li>
        <p class="info__text">бекенд розробникам (node js)</p>
      </li>
    </ul>

    <h4 class="info__list__title">Що я пропоную?</h4>
    <ul class="info__list">
      <li>
        <p class="info__text">
          Ознайомитися з структурою АРІ. Тут можна зробити сайт або додаток
          будь-якої складності, імітувати процесси, які ви захочете. Вже
          відправна точка написана.
        </p>
      </li>

      <li>
        <p class="info__text">
          Подумати чи цікаво зробити свій практичний проект на базі цього АРІ.
        </p>
      </li>

      <li>
        <p class="info__text">
          Зробити власний проект самостійного або з колегою і показати іншим.
        </p>
      </li>

      <li>
        <p class="info__text">
          Розмістити свій проект в резюме або мій як місце здобуття практики.
        </p>
      </li>
    </ul>

    <h4 class="info__list__title">А також:</h4>
    <ul class="info__list">
      <li>
        <p class="info__text">
          завершені проекти я додам на інфо сторінку серверу.
        </p>
      </li>

      <li>
        <p class="info__text">
          додам у розділ "Хто з нами?" учасників з посиланням на профілі у
          LinkedIn
        </p>
      </li>

      <li>
        <p class="info__text">
          дизайн проекти зможуть втілити в життя фронтенд розробники. Обрати з
          варіантів дизайнів під цей АРІ.
        </p>
      </li>

      <li>
        <p class="info__text">
          живі (на хостингу) сайти зможуть тестувати всі бажаючі.
        </p>
      </li>

      <li>
        <p class="info__text">
          для бекенд розробника пропозиція скромна - лише написати оптимізацію
          існуючого коду або розробити нові фітчі. Потім зробимо merge.
        </p>
      </li>

      <li>
        <p class="info__text">
          буде добрим доповненням до вашого проекту супровідний текстовий
          документ з деталями, які ви закладали в логіку. Тоді спеціаліст, який
          працює на вашій базі буде мати краще уявлення що розробляти і
          тестувати.
        </p>
      </li>
    </ul>

    <p class="info__text description">
      Останнє і не менш важливе. В термінах роботи ви не обмежені, працюйте в
      своєму режимі коли вам зручно, ставте свої власні терміни щоб проект мав
      окреслені часові межі і не закинули після втрати мотивації. Хостинг АРІ і
      домен працює мінімум рік, а далі подумаємо.
    </p>

    <p class="info__text">
      Я організатор цієї двіжухи. Не маю ніякого комерційного зиску. Зробив АРІ
      бо вчив нові речі для себе, а результатом не шкода поділитися.
      Користуйтесь. Тегніть своїх знайомих, кому це може бути цікаво.
      Навчайтесь. Звʼязок через приватні повідомлення або в коментарях під
      публікацією.
    </p>
  </div>
</section>
 <section class="section" id="docs">
  <div class="container">
    <h2 class="section__title">Документація</h2>

    <a class="swagger_link" href="/api-v1/doc/">перехід на Swagger сторінку</a>

    <nav class="route-nav">
      <ul>
        <ul class="menu menu__routes">
          <li>
            <a class="menu__link" href="#users">users</a>
          </li>
          <li>
            <a class="menu__link" href="#roles">roles</a>
          </li>
          <li>
            <a class="menu__link" href="#plans">plans</a>
          </li>
          <li>
            <a class="menu__link" href="#posts">posts</a>
          </li>
          <li>
            <a class="menu__link" href="#comments">comments</a>
          </li>
          <li>
            <a class="menu__link" href="#books">books</a>
          </li>
          <li>
            <a class="menu__link" href="#genres">genres</a>
          </li>
        </ul>
      </ul>
    </nav>

    <p class="docs__text description">
      У проекті підключена база даних SQLite, вона як файл знаходиться на
      сервері разом з кодом. До неї не підключено окремого UI, тому доступ до
      даних тільки через консоль або АРІ.
    </p>

    <p class="docs__text description">
      База має кілька таблиць
      <a
        class="docs_link"
        href="https://dbdiagram.io/d/posts-sqlite-662f55c25b24a634d00bd7b7"
        target="_blank"
        rel="noopener noreferrer"
        >посилання на схему</a
      >
    </p>

    <img
      class="docs_image"
      src="./images/db-schema.png"
      alt="схема таблиць бази даних"
      height="1000"
      width="1000"
    />

    <h3 class="section__subtitle sticky" id="users">User</h3>
    <div class="route-wrp">
  <h4 class="section__route">/api-v1/user/register</h4>
  <p class="docs__text">
    Створює новий профіль користувача при відправці форми з обовʼязковими
    полями:
  </p>
  <p class="docs__text query-params">
    { "password": "string", "email": "string", "role": "string" }
  </p>
  <p class="docs__text description">
    Пароль кодується і зберігається в базі у закодованому вигляді (bcrypt).
  </p>
  <img
    class="docs_image"
    src="./images/user-password.png"
    alt="зображення обʼєкта користувача з шифрованим паролем"
    height="1000"
    width="1000"
  />
  <p class="docs__text">
    Назад маршрут повертає весь обʼєкт користувача, включно з новим полем
    <strong>access_token</strong>
    - цей ключ потрібен в майбутньому при зверненні до захищених маршрутів АРІ.
    Цей токен має обмежений термін життя - <strong> 10 хвилин </strong>, а потім
    потрібно звернутись за оновленням токену.
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/token</h4>
  <p class="docs__text">
    Очікує <strong>refresh_token</strong>, який раніше був виданий користувачу
    при реєстрації чи вході. Перевіряє чи їснує такий токен взагалі і проходить
    розкодування. Потім формує новий <strong>access_token</strong> і повертає на
    сторону клієнта
  </p>
  <p class="docs__text query-params">{ "refresh_token": "string" }</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/login</h4>
  <p class="docs__text">
    Виконує автентифікацію користувача при отриманні обовʼязкових значень з
    форми
  </p>
  <p class="docs__text query-params">
    { "password": "string", "email": "string" }
  </p>
  <p class="docs__text">
    Перевіряє чи існує користувач з такою поштою в базі, якщо існує то перевіряє
    пароль. Назад маршрут повертає весь обʼєкт користувача, включно з новим
    полем
    <strong>access_token</strong>.
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/logout</h4>
  <p class="docs__text">
    Очікує <strong>refreshToken</strong>, який раніше був виданий користувачу.
    Перевіряє чи їснує такий токен взагалі. Потім видаляє в базі цей токен зі
    зберігання. Назад не повертає даних, а тільки статус 204
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/update-profile</h4>
  <p class="docs__text">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можна оновити дані:
  </p>
  <p class="docs__text query-params">
    { "sign_plan": 0, "payment": "string", "location": "string" }
  </p>
  <p class="docs__text">
    МІнімум одне поле обʼєкта можно оновити. Назад маршрут повертає весь обʼєкт
    користувача, без поля <strong>access_token</strong>.
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/update-password</h4>
  <p class="docs__text">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можна оновити пароль якщо
    відомо попередній:
  </p>
  <p class="docs__text query-params">
    { "password_old": "string", "password_new": "string" }
  </p>
  <p class="docs__text">
    Перевіряє старий пароль що зберігається в базі з щойно надійшовшим, якщо все
    добре, то робить новий пароль у закодованому вигляді (bcrypt) і записує в
    базу. Назад не повертає даних, а тільки статус 204
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/update-avatar</h4>
  <p class="docs__text description">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Оновлює зображення аватару
    користувача якщо надіслати файл із
    <strong>“Content-Type: multipart/form-data”</strong>. Поле у формі повинно
    мати назву <strong>avatar</strong>.
  </p>
  <p class="docs__text docs__list__title">
    Файл має обмеження до 3 мб. Приймаються тільки формати зображень:
  </p>
  <ul class="docs__list">
    <li>
      <p>image/png</p>
    </li>
    <li>
      <p>image/jpeg</p>
    </li>
    <li>
      <p>image/webp</p>
    </li>
  </ul>
  <p class="docs__text description">
    Потім на сервері обрізається до розмірів 500рх x 500рх, застосовується
    властивість
    <a
      class="users__link"
      href="https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit#cover"
      target="_blank"
      rel="noopener noreferrer"
      >fit:cover</a
    >, змінюється якість зображення до 70% від оригіналу. Оброблене зображення
    відправляється на зберігання у
    <a
      class="users__link"
      href="https://aws.amazon.com/ru/pm/serv-s3/?gclid=Cj0KCQjwir2xBhC_ARIsAMTXk85mAdVGtud2UEwwCjW07R30bI3O_oOa3sFbeD4mqQm43vaoX7Q5uQQaAglSEALw_wcB&trk=c8974be7-bc21-436d-8108-722e8ab912e1&sc_channel=ps&ef_id=Cj0KCQjwir2xBhC_ARIsAMTXk85mAdVGtud2UEwwCjW07R30bI3O_oOa3sFbeD4mqQm43vaoX7Q5uQQaAglSEALw_wcB:G:s&s_kwcid=AL!4422!3!645125274431!e!!g!!aws%20s3!19574556914!145779857032"
      target="_blank"
      rel="noopener noreferrer"
      >AWS S3</a
    >, а шлях до файлу зберігається у базі у обʼєкті користувача. Імʼя файлу
    створено з динамічним ключем <strong>user_id</strong> і кожен користувач має
    унікальну назву файлу. Коли користувач оновлює аватар, то перезаписує свій
    попередній, таким чином немає накопичення файлів та історії їх оновлення.
  </p>
  <img
    class="docs_image"
    src="./images/user-avatar-0.png"
    alt="зображення сховища AWS S3 і відкритою папкою Avatars"
    height="1000"
    width="1000"
  />
  <img
    class="docs_image"
    src="./images/user-avatar-1.png"
    alt="зображення обʼєкта користувача де поле avatar_url виглядає як шлях до файлу"
    height="1000"
    width="1000"
  />
  <p class="docs__text description">
    Після успішної обробки даних назад маршрут повертає весь обʼєкт користувача,
    без поля <strong>access_token</strong> разом з згенерованим url до
    зображення в сховищі. Є в цього методу можливість встановлювати термін життя
    посилання, але зараз не застосований. Для генерації посилань потрібно шлях
    до файлу, тому цей шлях збережено у базі, а не посилання.
  </p>
  <p class="docs__text description accent-text">
    <em>
      Тепер всі маршрути які повертають об'єкт користувача на сторону клієнта
      додатково генерують url з шляху.
    </em>
  </p>
  <img
    class="docs_image"
    src="./images/user-avatar-2.png"
    alt="зображення обʼєкта користувача де поле avatar_url виглядає як url"
    height="1000"
    width="1000"
  />
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/delete-avatar</h4>
  <p class="docs__text">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Видаляє зображення аватару
    користувача. Спочатку записує замість старого значення нове
    <strong>“empty”</strong>, а потім видаляє файл за адресою у сховищі. Назад
    не повертає даних, а тільки статус 204
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/delete-profile</h4>
  <p class="docs__text">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Видаляє профіль користувача у
    базі. Не видаляє створені ним раніше записи в таблицях (posts, books,
    comments), але видаляє зображення аватару у сховищі AWS S3. Назад не
    повертає даних, а тільки статус 204
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/all-profiles</h4>
  <p class="docs__text">
    Демонстраційний маршрут, який не варто використовувати в розробці
    клієнтської частини. Створений для зручної перевірки стану таблиці users при
    практичних заняттях з АРІ. Назад повертає масив обʼєктів, в яких видно
    пароль і згенеровані url посилання на зображення.
  </p>
</div>


    <h3 class="section__subtitle sticky" id="roles">Roles</h3>
    <div class="route-wrp">
  <h4 class="section__route">/api-v1/user/roles</h4>
  <p class="docs__text docs__list__title">
    Назад повертає масив обʼєктів, в яких видно заплановані ролі на проекті:
  </p>
  <ul class="docs__list">
    <li>
      <p>admin</p>
    </li>
    <li>
      <p>author</p>
    </li>
    <li>
      <p>customer</p>
    </li>
  </ul>
  <p class="docs__text">CRUD операції не передбачені.</p>
</div>


    <h3 class="section__subtitle sticky" id="plans">Plans</h3>
    <div class="route-wrp">
  <h4 class="section__route">/api-v1/user/create-plan</h4>
  <p class="docs__text">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можливе використання тільки
    користувачам з role=admin. Створює новий план підписки для обмеження доступу
    до контенту. Очікує обовʼязкові поля:
  </p>
  <p class="docs__text query-params">{ "title": "string", "cost": 0 }</p>
  <p class="docs__text">Назад не повертає даних, а тільки статус 204</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/update-plan</h4>
  <p class="docs__text">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можливе використання тільки
    користувачам з role=admin. Оновлює поля обʼєкту, plan_id обовʼязково і title
    або cost:
  </p>
  <p class="docs__text query-params">
    { "plan_id": 0, "title": "string", "cost": 0 }
  </p>
  <p class="docs__text">Назад повертає цей оновлений обʼєкт плану підписки.</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/plans</h4>
  <p class="docs__text">Назад повертає масив обʼєктів планів підписки.</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/user/delete-plan</h4>
  <p class="docs__text">
    Захищений маршрут користувача. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можливе використання тільки
    користувачам з role=admin. Видаляє існуючий план підписки якщо надіслати:
  </p>
  <p class="docs__text query-params">{ "plan_id": 0 }</p>
  <p class="docs__text">Назад не повертає даних, а тільки статус 204</p>
</div>


    <h3 class="section__subtitle sticky" id="posts">Posts</h3>
    <div class="route-wrp">
  <h4 class="section__route">/api-v1/create-post</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можна створити публікацію з
    обовʼязковими полями:
  </p>
  <p class="docs__text query-params">
    { "title": "string", "message": "string" }
  </p>
  <p class="docs__text">Назад не повертає даних, а тільки статус 204</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/update-post</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можна оновити дані у власній
    публікації:
  </p>
  <p class="docs__text query-params">
    { "title": "string", "message": "string" }
  </p>
  <p class="docs__text">
    МІнімум одне поле обʼєкта можно оновити. Назад маршрут повертає весь обʼєкт
    публікації.
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/posts</h4>
  <p class="docs__text description">
    Маршрут по якому можна отримати всі публікації з бази. Також можна
    застосувати до запиту налаштування пагінації, якщо передати pageNumber
    (порядковий номер сторінки) і pageSize (кількість обʼєктів на сторінці).
    Назад маршрут повертає масив обʼєктів публікації.
  </p>
  <p class="docs__text accent-text">
    <em>Приклад: /api-v1/posts?pageNumber=2&pageSize=5</em>
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/my-posts</h4>
  <p class="docs__text description">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можна отримати вибірку власних
    публікацій. Можна застосувати до запиту критерії фільтрування по полю title
    або message.
  </p>
  <p class="docs__text description accent-text">
    <em>Приклади:</em>
    <em>/api-v1/my-posts?field=title&value=react</em>
    <em>/api-v1/my-posts?field=message&value=best%20practice</em>
  </p>
  <p class="docs__text description">
    Також можна застосувати налаштування пагінації, якщо передати pageNumber
    (порядковий номер сторінки) і pageSize (кількість обʼєктів на сторінці).
    Назад маршрут повертає масив обʼєктів публікації.
  </p>
  <p class="docs__text accent-text">
    <em
      >Приклад:
      /api-v1/my-posts?field=message&value=taras&pageNumber=1&pageSize=5</em
    >
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/delete-post</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Видаляє існуючий пост якщо він
    створений авторизованим користувачем, потрібно надіслати:
  </p>
  <p class="docs__text query-params">{ "post_id": 0 }</p>
  <p class="docs__text">Назад не повертає даних, а тільки статус 204</p>
</div>


    <h3 class="section__subtitle sticky" id="comments">Comments</h3>
    <div class="route-wrp">
  <h4 class="section__route">/api-v1/post/create-comment</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Створює коментар до
    публікації. Потрібно надіслати обовʼязкові поля:
  </p>
  <p class="docs__text query-params">{ "post_id": 0, "message": "string" }</p>
  <p class="docs__text">Назад не повертає даних, а тільки статус 204</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/post/update-comment</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можна оновити дані у власному
    коментарі:
  </p>
  <p class="docs__text query-params">
    { "post_id": 0, "comment_id": 0, "message": "string" }
  </p>
  <p class="docs__text">Назад маршрут повертає весь обʼєкт публікації.</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/post/comments-below-post</h4>
  <p class="docs__text description">
    Маршрут по якому можна отримати всі коментарі під конкретним постом з бази.
    Для цього треба застосувати до запиту обовʼязкові критерії фільтрування по
    полю post_id
  </p>
  <p class="docs__text description accent-text">
    <em>Приклад: /api-v1/post/comments-below-post?field=post_id&value=1</em>
  </p>
  <p class="docs__text description">
    Також можна застосувати налаштування пагінації, якщо передати pageNumber
    (порядковий номер сторінки) і pageSize (кількість обʼєктів на сторінці).
    Назад маршрут повертає масив обʼєктів коментаря.
  </p>
  <p class="docs__text accent-text">
    <em
      >Приклад:
      /api-v1/post/comments-below-post?field=post_id&value=1&pageNumber=2&pageSize=5</em
    >
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/post/all-comments</h4>
  <p class="docs__text description">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можливе використання тільки
    користувачам з role=admin. Для цього можна застосувати до запиту критерії
    фільтрування по полю post_id або user_id
  </p>
  <p class="docs__text description accent-text">
    <em>Приклади:</em>
    <em>/api-v1/post/all-comments?field=post_id&value=2</em>
    <em>/api-v1/post/all-comments?field=user_id&value=4</em>
  </p>
  <p class="docs__text description">
    Також можна застосувати налаштування пагінації, якщо передати pageNumber
    (порядковий номер сторінки) і pageSize (кількість обʼєктів на сторінці).
    Назад маршрут повертає масив обʼєктів коментаря.
  </p>
  <p class="docs__text accent-text">
    <em
      >Приклад:
      /api-v1/post/all-comments?field=post_id&value=2&pageNumber=1&pageSize=10</em
    >
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/post/delete-comment</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Видаляє існуючий коментар якщо
    він створений авторизованим користувачем, потрібно надіслати:
  </p>
  <p class="docs__text query-params">{ "comment_id": 0 }</p>
  <p class="docs__text">Назад не повертає даних, а тільки статус 204</p>
</div>


    <h3 class="section__subtitle sticky" id="books">Books</h3>
    <div class="route-wrp">
  <h4 class="section__route">/api-v1/create-book</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Створює книгу. Потрібно
    надіслати обовʼязкові поля:
  </p>
  <p class="docs__text query-params">
    { "title": "string", "short_desc": "string" }
  </p>
  <p class="docs__text">
    Можливо додати до запиту не обовʼязкові поля і вони додаються у цей обʼєкт:
  </p>
  <p class="docs__text query-params">
    { "cover_image_url": "string", "literary_genre": "array", "cost": "integer",
    "count": "integer" }
  </p>
  <p class="docs__text description">
    Назад не повертає даних, а тільки статус 204
  </p>
  <p class="docs__text description accent-text">
    <em
      >Важливо: таблиця books у полі literary_genre має тип text і зберігає всі
      жанри одним суцільним рядком з роздільником “ | “, а потім додатковими
      діями цей рядок розділяється на масив і повертається на сторону
      клієнта</em
    >
  </p>
  <img
    class="docs_image"
    src="./images/book-genre-1.png"
    alt="зображення обʼєкта книга, яке показує literary_genre у вигляді текстового рядка"
    height="1000"
    width="1000"
  />
  <img
    class="docs_image"
    src="./images/book-genre-2.png"
    alt="зображення обʼєкта книга, яке показує literary_genre у вигляді масиву текстових рядків"
    height="1000"
    width="1000"
  />
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/update-book</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можна оновити дані у власній
    книжці. Окрім book_id потрібно передати ще мінімум одне поле:
  </p>
  <p class="docs__text query-params">
    { "book_id": 0, "title": "string", "short_desc": "string", "literary_genre":
    [ "string" ], "cost": 0, "count": 0 }
  </p>
  <p class="docs__text description">
    Назад маршрут повертає весь обʼєкт книги.
  </p>
  <p class="docs__text accent-text">
    <em
      >Важливо: у поле literary_genre потрібно передавати масив з актуальних
      жанрів, а далі він трансформується у рядок і перезаписує минуле
      значення.</em
    >
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/update-book-cover</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Оновлює зображення обкладинки
    книги якщо надіслати файл із
    <strong>“Content-Type: multipart/form-data”</strong>. Поле у формі повинно
    мати назву cover і
  </p>
  <p class="docs__text query-params">{ "book_id": 0 }</p>
  <p class="docs__text docs__list__title">
    Файл має обмеження до 3 мб. Приймаються тільки формати зображень:
  </p>
  <ul class="docs__list">
    <li>
      <p>image/png</p>
    </li>
    <li>
      <p>image/jpeg</p>
    </li>
    <li>
      <p>image/webp</p>
    </li>
  </ul>
  <p class="docs__text description">
    Потімна сервері обрізається до розмірів 800рх x 600рх, застосовується
    властивість
    <a
      class="users__link"
      href="https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit#cover"
      target="_blank"
      rel="noopener noreferrer"
      >fit:cover</a
    >, змінюється якість зображення до 70% від оригіналу. Оброблене зображення
    відправляється на зберігання у
    <a
      class="users__link"
      href="https://aws.amazon.com/ru/pm/serv-s3/?gclid=Cj0KCQjwir2xBhC_ARIsAMTXk85mAdVGtud2UEwwCjW07R30bI3O_oOa3sFbeD4mqQm43vaoX7Q5uQQaAglSEALw_wcB&trk=c8974be7-bc21-436d-8108-722e8ab912e1&sc_channel=ps&ef_id=Cj0KCQjwir2xBhC_ARIsAMTXk85mAdVGtud2UEwwCjW07R30bI3O_oOa3sFbeD4mqQm43vaoX7Q5uQQaAglSEALw_wcB:G:s&s_kwcid=AL!4422!3!645125274431!e!!g!!aws%20s3!19574556914!145779857032"
      target="_blank"
      rel="noopener noreferrer"
      >AWS S3</a
    >, а шлях до файлу зберігається у базі у обʼєкті книги. Імʼя файлу створено
    з динамічним ключем user_id і book_id, так кожна обкладинка має унікальну
    назву файлу. Коли користувач оновлює обкладинку, то перезаписує попередню до
    цієї ж книги, таким чином немає накопичення файлів та історії їх оновлення.
  </p>
  <img
    class="docs_image"
    src="./images/books-1.png"
    alt="зображення сховища AWS S3 і відкритою папкою Books"
    height="1000"
    width="1000"
  />
  <p class="docs__text description">
    Після успішної обробки даних шлях до файлу записано у таблицю books в
    короткому вигляді, а потім перед видачею даних на сторону клієнта функція
    генерує url. Є в цього методу можливість встановлювати термін життя
    посилання, але зараз не застосований. Для генерації посилань потрібно шлях
    до файлу, тому цей шлях збережено у базі, а не посилання. Назад маршрут
    повертає весь обʼєкт книги.
  </p>
  <p class="docs__text description accent-text">
    <em
      >Тепер всі маршрути які повертають на сторону клієнта об'єкт книги на
      сервері додатково генерують url з шляху.</em
    >
  </p>
  <img
    class="docs_image"
    src="./images/books-2.png"
    alt="зображення обʼєкта користувача де поле cover_image_url виглядає як шлях до файлу"
    height="1000"
    width="1000"
  />
  <img
    class="docs_image"
    src="./images/books-3.png"
    alt="зображення обʼєкта користувача де поле cover_image_url виглядає як url"
    height="1000"
    width="1000"
  />
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/delete-book-cover</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Видаляє зображення обкладинки
    книги створеної авторизованим користувачем. Потрібно передати обовʼязкове
    поле:
  </p>
  <p class="docs__text query-params">{ "book_id": 0 }</p>
  <p class="docs__text">
    Спочатку записує замість старого значення нове “empty”, а потім видаляє файл
    за адресою у сховищі. Назад не повертає даних, а тільки статус 204
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/books</h4>
  <p class="docs__text description">
    Маршрут по якому можна отримати всі книги з бази. Також можна застосувати до
    запиту критерії фільтрування по одному з полів:
    <strong
      >cost, count, book_id, user_id, title, short_desc, literary_genre.</strong
    >
  </p>
  <p class="docs__text description accent-text">
    <em
      >Важливо: числові значення пошуку фільтруються у точній відповідності
      WHERE ${field} = ${value}, а текстові значення фільтруються при наявності
      у будь якій частині речення WHERE ${field} LIKE '%${value}%'</em
    >
  </p>
  <p class="docs__text description accent-text">
    <em>Приклади:</em>
    <em>/api-v1/books?field=cost&value=100</em>
    <em>/api-v1/books?field=short_desc&value=poet</em>
  </p>
  <p class="docs__text description">
    Також можна застосувати налаштування пагінації, якщо передати pageNumber
    (порядковий номер сторінки) і pageSize (кількість обʼєктів на сторінці).
    Назад маршрут повертає масив обʼєктів публікації.
  </p>
  <p class="docs__text accent-text">
    <em
      >Приклад:
      /api-v1/books?field=literary_genre&value=fiction&pageNumber=1&pageSize=10</em
    >
  </p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/delete-book</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Видаляє існуючу книгу якщо
    вона створений авторизованим користувачем, потрібно надіслати:
  </p>
  <p class="docs__text query-params">{ "book_id": 0 }</p>
  <p class="docs__text">
    Також видаляє зображення обкладинки у сховищі AWS S3. Назад не повертає
    даних, а тільки статус 204
  </p>
</div>


    <h3 class="section__subtitle sticky" id="genres">Genres</h3>
    <div class="route-wrp">
  <h4 class="section__route">/api-v1/create-genre</h4>
  <p class="docs__text">
    Захищений маршрут. Потребує в заголовку запиту наявність
    <strong>Bearer token (access_token)</strong>. Можливе використання тільки
    користувачам з role=admin або author. Створює новий літературний жанр.
    Очікує обовʼязкові поля:
  </p>
  <p class="docs__text query-params">{ "title": "string" }</p>
  <p class="docs__text">Назад не повертає даних, а тільки статус 204</p>
</div>

<!-- ============================================================ -->

<div class="route-wrp">
  <h4 class="section__route">/api-v1/genres</h4>
  <p class="docs__text">
    Маршрут по якому можна отримати всі жанри з бази. Також можна застосувати до
    запиту критерії фільтрування по полю title. Назад маршрут повертає масив
    обʼєктів жанр.
  </p>
  <p class="docs__text accent-text">
    <em>Приклад: /api-v1/genres?field=title&value=fic</em>
  </p>
</div>

  </div>
</section>

      <section class="section" id="contacts">
  <div class="container">
    <h2 class="section__title">Контакти</h2>

    <ul class="contacts_list">
      <li>
        <a
          class="contacts_item_link"
          href="https://www.linkedin.com/in/%D1%81%D0%B5%D1%80%D0%B3%D0%B5%D0%B9-%D0%BC%D0%B8%D1%81%D1%8E%D0%BA/"
          target="_blank"
          rel="noopener noreferrer"
        >
          <h4 class="contacts_item_title">Sergiy Misyuk</h4>
          <p class="contacts_item_subtitle">full stack developer</p>
        </a>
      </li>
    </ul>
  </div>
</section>

      <section class="section" id="projects">
  <div class="container">
    <h2 class="section__title">Проекти</h2>

    <p class="docs__text description">
      Якщо хтось зробить, то тут будуть посилання на макети, сайти, мобільні
      додатки.
    </p>
  </div>
</section>

    </main>
    <footer class="footer">
  <p class="footer__text">&#169 2024 Sergiy Misyuk</p>
</footer>

  </body>
</html>
